<!DOCTYPE html>
<!--Autor: Mateus Oliveira <mateusocb@gmail.com>-->
<html>
    <head>
        <meta charset="UTF-8">
    </head>

    <body>
        <h1>Sistema de Gestão de Tarefas</h1>
        <table border="1">
            <tr>
                <th colspan="2" align=˜center˜>Cadastro de Tarefas</th>
            </tr>
            <tr>
                <td><label for="titulo">Título:</label></td>
                <td><input type="text" id="titulo" /></td>
            </tr>
            <tr>
                <td><label for="dataCriacao">Data de criação:</label></td>
                <td><input type="date" id="dataCriacao" /></td> 
            </tr>
            <tr>
                <td colspan="2" align="center"><button onclick="inserirTarefa()">Inserir Tarefa</button></td>
            </tr>
        </table>

        <br />

        <table id="todoTable" border="1">
            <thead>
                <tr>
                    <th colspan="4" align=˜center˜>Listagem de Tarefas</th>
                </tr>
                <tr>
                    <th>Descricão</th>
                    <th>Data de Criação</th>
                    <th>Completar</th>                       
                    <th>Apagar</th>                       
                </tr>
            </thead>
            
            <tbody id="todoTableBody">
            </tbody>
        </table>



        <script>
            var listaDeTarefas = new Array;

            window.onload = function () {
                desenharTabela();
            };



            function desenharTabela() {
                document.getElementById("todoTableBody").innerHTML = "";

                var tabela = [];

                for (i = 0; i < listaDeTarefas.length; i++) {
                    tabela.push("<tr>");
                    
                    if (!listaDeTarefas[i].terminada) {
                        tabela.push("<td>" + listaDeTarefas[i].titulo + "</td>");
                        tabela.push("<td>" + listaDeTarefas[i].dataCriacao + "</td>");
                    } else {
                        tabela.push("<td><strike>" + listaDeTarefas[i].titulo + "</strike></td>");
                        tabela.push("<td><strike>" + listaDeTarefas[i].dataCriacao + "</strike></td>");
                    }
                    
                    tabela.push("<td><button value=\"" + i + "\" onclick=\"completarTarefa()\">Completar</button></td>");
                    tabela.push("<td><button value=\"" + i + "\" onclick=\"deletarTarefa()\">Apagar</button></td>");
                    tabela.push("</tr>");
                }
                document.getElementById("todoTableBody").innerHTML = tabela.join("");
            }
            
            function inserirTarefa() {
                listaDeTarefas.push({
                    titulo: document.getElementById("titulo").value,
                    dataCriacao: document.getElementById("dataCriacao").value,
                    terminada: false
                });

                document.getElementById("titulo").value = "";
                document.getElementById("dataCriacao").value = "";

                desenharTabela();
            }
            
            function deletarTarefa() {
                listaDeTarefas.splice(parseInt(event.srcElement.value), 1);

                desenharTabela();
            }

            function completarTarefa() {
                listaDeTarefas[parseInt(event.srcElement.value)].terminada = true;

                desenharTabela();
            }
        </script> 
    </body>
</html>
